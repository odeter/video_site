<!DOCTYPE html>
<html lang="en">

    <head>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">

	<title>{{ custom_content['title'] }}</title>

	<link href="{{ url_for('static', filename='textillate-master/assets/animate.css') }}" rel="stylesheet">
	<!-- <link href="static/textillate-master/assets/style.css" rel="stylesheet"> -->
	<link href="{{ url_for('static', filename='login_p/login.css') }}" rel="stylesheet" type="text/css">

    </head>

    <body>
	<div class="wrapper">
	    <div class="container">
		<h1>Welcome</h1>
		<div id="wel">

		</div>
		<form>
		    {{ form.hidden_tag() }}
		    {{ form.email(class_='form-control', placeholder='Email Address') }}
		    {{ form.password(class_='form-control', placeholder='Password') }}
		    <button type="submit" id="login-button">Login</button>
		    <div id="errDiv">
		    </div>
		</form>
	    </div>

	    <ul class="bg-bubbles">
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
	    </ul>
	</div>

	<!-- <div class="container">
	     <div class="card card-login mx-auto mt-5">
	     <div class="card-header">Login</div>
	     <div class="card-body">
	     <form action="" method="post" novalidate>
	     <div class="form-group">
	     <div class="form-label-group">
	     <input type="email" name="email" id="inputEmail" class="form-control" placeholder="Email address" required="required" autofocus="autofocus" value="{{request.form.email }}">
	     <label for="inputEmail">Email</label>
	     </div>
	     </div>
	     <div class="form-group">
	     <div class="form-label-group">
	     <input type="password" name="password" id="inputPassword" class="form-control" placeholder="Password" required="required" value="{{request.form.password }}">
	     <label for="inputPassword">Password</label>
	     </div>
	     </div>
	     <div class="form-group">
	     <div class="checkbox">
	     <label>
	     <input type="checkbox" name="remember" value="{{request.form.remember}}">
	     Remember Me
	     </label>
	     </div>
	     </div>

	<input class="btn btn-primary btn-block" type="submit" value="Login">
		</form>
		{% if error %}
		<div class="alert alert-primary" role="alert">
		    <strong>Error:</strong> {{ error }}
		</div>
		{% endif %}

		<div class="text-center">
		    <a class="d-block small" href="forgot-password.html">Forgot Password?</a>
		</div>
	</div>
	</div>
	</div> -->


	<script src="{{ url_for('static', filename='jquery/jquery-3.3.1.min.js') }}"></script>
	<script src="{{ url_for('static', filename='textillate-master/assets/jquery.fittext.js') }}"></script>
	<script src="{{ url_for('static', filename='textillate-master/assets/jquery.lettering.js') }}"></script>
	<script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>
	<script src="{{ url_for('static', filename='textillate-master/jquery.textillate.js') }}"></script>
	<script>
	 $(document).ready(function() {
	     $(function () {
		 $('.tlt').textillate();
	     });

             $('form').submit(function (e) {
		 var url = "{{ custom_content['logincheck'] }}"; // send the form data here.
		 var errors = []
		 $.ajax({
                     type: "POST",
                     url: url,
                     data: $('form').serialize(), // serializes the form's elements.
                     success: function (data) {
			 console.log(data)  // display the returned data in the console.
			 reto = data['data']['su_re'];
			 errors = data['data']['errors'];
			 if (errors){
			     var errstring = "";
			     for (i = 0; i < errors.length; i++){
				 errstring += "<p>"+errors[i]+"</p><br>"
			     }
			     $( "#errDiv" ).html(errstring);
			 }
			 else if (reto){
			     console.log(reto)
			     $('form').fadeOut(500);
			     $('.wrapper').addClass('form-success');
			     var mesg = "<h1 class='hide-text'>To Lasha</h1>"
			     $( "#wel" ).html(mesg);
			     $('.hide-text').textillate({
				 loop: false,
				 initialDelay: 500,
				 in: {
				     effect: 'fadeIn',
				     shuffle: false,
				 }
			     });
			     setTimeout(function () {
				 window.location.href = reto;
			     }, 2500);
			 }
                     }
		 });
		 e.preventDefault(); // block the traditional submission of the form.
             });
             // Inject our CSRF token into our AJAX request.
             $.ajaxSetup({
		 beforeSend: function(xhr, settings) {
                     if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
			 xhr.setRequestHeader("X-CSRFToken", "{{ form.csrf_token._value() }}")
                     }
		 }
             })
	 });
	</script>

	<!-- <script src="static/login_p/login.js"></script> -->
	<!--
	<script src="static/private/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
	<script src="static/private/vendor/jquery-easing/jquery.easing.min.js"></script>
	-->

    </body>

</html>
